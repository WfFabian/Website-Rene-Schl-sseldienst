<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dateien hochladen mit Cloudinary</title>
    <script src="https://widget.cloudinary.com/v2.0/global/all.js"></script>
</head>
<body>
    <h1>Willkommen zu meinem Datei-Upload</h1>
    <p>Wählen Sie eine Datei zum Hochladen aus:</p>

    <!-- Button zum Öffnen des Cloudinary-Widgets -->
    <button id="upload_widget_opener">Datei hochladen</button>

    <h2>Verfügbare Dateien:</h2>
    <ul id="fileList"></ul>

    <script>
        // Ersetze dies mit deinem Cloudinary Cloud Name und Upload Preset
        const cloudName = 'DEIN_CLOUD_NAME'; // Dein Cloudinary Cloud Name
        const uploadPreset = 'DEIN_UPLOAD_PRESET'; // Dein Upload Preset

        // Cloudinary-Widget erstellen
        const cloudinaryWidget = cloudinary.createUploadWidget({
            cloudName: cloudName,
            uploadPreset: uploadPreset,
            sources: ['local', 'url', 'camera'], // Quellen für den Upload
            multiple: true, // Mehrere Dateien können gleichzeitig hochgeladen werden
        }, (error, result) => {
            if (!error && result && result.event === "success") {
                // Wenn der Upload erfolgreich war, die Datei anzeigen
                const fileUrl = result.info.secure_url;
                console.log('Datei hochgeladen:', fileUrl);

                // Zeigt den Upload-Link im UI an
                const fileList = document.getElementById('fileList');
                const li = document.createElement('li');
                li.innerHTML = `<a href="${fileUrl}" download>${result.info.public_id}</a>`;
                fileList.appendChild(li);
            } else if (error) {
                console.error('Fehler beim Hochladen:', error);
            }
        });

        // Öffnet das Widget beim Klicken auf den Button
        document.getElementById('upload_widget_opener').addEventListener('click', () => {
            cloudinaryWidget.open();
        });
    </script>
</body>
</html>
